<div class="auth-container">
  <div class="auth-background"></div>
  <div class="auth-overlay"></div>
  
  <div class="auth-content">
    <mat-card appearance="outlined" class="auth-card">
      <mat-card-header class="auth-header">
        <div class="auth-header-content">
          <div class="auth-header-text">
            <mat-card-title class="auth-title">Đăng nhập</mat-card-title>
            <mat-card-subtitle class="auth-subtitle">Hệ thống Phối trộn Quặng</mat-card-subtitle>
          </div>
          <div class="logo-container">
            <img src="/assets/images/logos/logo_color.png" alt="Logo" class="logo-image" />
          </div>
        </div>
      </mat-card-header>
      
      <mat-card-content class="auth-body">
        <form [formGroup]="loginForm" (ngSubmit)="submitLogin()" class="auth-form">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Tên đăng nhập</mat-label>
            <input matInput formControlName="username" autocomplete="username" />
            <mat-icon matPrefix class="input-icon">person</mat-icon>
            <mat-error *ngIf="loginForm.get('username')?.touched && loginForm.get('username')?.hasError('required')">
              Vui lòng nhập tên đăng nhập
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Mật khẩu</mat-label>
            <input matInput type="password" formControlName="password" autocomplete="current-password" />
            <mat-icon matPrefix class="input-icon">lock</mat-icon>
            <mat-error *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.hasError('required')">
              Vui lòng nhập mật khẩu
            </mat-error>
          </mat-form-field>

          <div class="error-message" *ngIf="error">
            <i class="bi bi-exclamation-circle"></i>
            {{ error }}
          </div>

          <button 
            mat-raised-button 
            color="primary" 
            class="w-100 login-button" 
            type="submit" 
            [disabled]="isSubmitting || loginForm.invalid">
            @if (isSubmitting) {
              <mat-progress-spinner mode="indeterminate" diameter="20" class="me-2"></mat-progress-spinner>
              <span>Đang đăng nhập...</span>
            } @else {
              <i class="bi bi-box-arrow-in-right me-2"></i>
              <span>Đăng nhập</span>
            }
          </button>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
